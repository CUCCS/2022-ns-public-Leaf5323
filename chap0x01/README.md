# åŸºäºVirtualBoxçš„ç½‘ç»œæ”»é˜²åŸºç¡€ç¯å¢ƒæ­å»º

## å®éªŒç¯å¢ƒ

- Host Machine

  - Windows 11 22H2 build 22622.590

- Virtual Machine Platform

  - VirtualBox 6.1.38 r153438

- Guest Machine

  - Attacker:
  
    - attacker-kali: Kali 2022.3 kali-rolling

  - Gateway:
  
    - gateway-debian: Debian 10 buster

  - Victim:

    - victim-kali: Kali 2022.3 kali-rolling

    - victim-xp-1: Windows xp 5.1 build 2600.xpsp.080413-2111:ServicePack3

    - victim-debian: Debian 10 buster

    - victim-xp-2: Windows xp 5.1 build 2600.xpsp.080413-2111:ServicePack3

## å®éªŒè¦æ±‚

- [x] è™šæ‹Ÿç¡¬ç›˜é…ç½®æˆå¤šé‡åŠ è½½ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  ![image](./img/vb-multi-attach.png)

- [x] æ­å»ºæ»¡è¶³å¦‚ä¸‹æ‹“æ‰‘å›¾æ‰€ç¤ºçš„è™šæ‹Ÿæœºç½‘ç»œæ‹“æ‰‘

  ![image](./img/vb-exp-layout.png)

- å®Œæˆä»¥ä¸‹ç½‘ç»œè¿é€šæ€§æµ‹è¯•ï¼š

  - [x] é¶æœºå¯ä»¥ç›´æ¥è®¿é—®æ”»å‡»è€…ä¸»æœº

  - [x] æ”»å‡»è€…ä¸»æœºæ— æ³•ç›´æ¥è®¿é—®é¶æœº

  - [x] ç½‘å…³å¯ä»¥ç›´æ¥è®¿é—®æ”»å‡»è€…ä¸»æœºå’Œé¶æœº

  - [x] é¶æœºçš„æ‰€æœ‰å¯¹å¤–ä¸Šä¸‹è¡Œæµé‡å¿…é¡»ç»è¿‡ç½‘å…³

  - [x] æ‰€æœ‰èŠ‚ç‚¹å‡å¯ä»¥è®¿é—®äº’è”ç½‘

## å®éªŒè¿‡ç¨‹è®°å½•

### Guest Machine Configuration

#### Multiattach Set Up

é¦–å…ˆä»æ¥æ²¡æœ‰å¬è¯´è¿‡`å¤šé‡åŠ è½½`è¿™ä¸ªåè¯ï¼ŒçœŸç™½ç©äº†é‚£ä¹ˆä¹…è™šæ‹Ÿæœºï¼Œç”±äºä¸ç¡®å®šç¿»è¯‘äºæ˜¯ç”¨ç›´æ¥å’•å’•å™œä¸­æ–‡`virtualbox å¤šé‡åŠ è½½`ï¼Œç„¶åé€šè¿‡æŸä¸ªæœç´¢ç»“æœè¿›å…¥çš„åšå®¢è½¬è½½ç½‘ç«™æ‰¾åˆ°äº†CSDNçš„åŸæ–‡ğŸ˜“ï¼Œäº†è§£äº†ä¸€ä¸‹æ“ä½œæµç¨‹ï¼Œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹ä¸¤æ­¥ï¼š

1. åœ¨VirtualBoxèœå•æ ä¸­çš„`ç®¡ç†`>`è™šæ‹Ÿä»‹è´¨ç®¡ç†`ä¸­æ‰¾åˆ°ç›®æ ‡ä»‹è´¨

2. é€‰ä¸­ç›®æ ‡ä»‹è´¨ï¼Œå¦‚æœä»‹è´¨å·²è¢«åˆ†é…åˆ™éœ€è¦å…ˆç‚¹å‡»`é‡Šæ”¾`ï¼Œæ­¤æ—¶ä¼šæé†’å°†ä»‹è´¨ä»æ·»åŠ åˆ°çš„è™šæ‹Ÿæœºç§»é™¤ï¼Œç¡®è®¤åå†ç‚¹å‡»`å±æ€§`åˆ‡æ¢å‡ºçª—å£ä¸‹æ–¹çš„å±æ€§é¡µé¢ï¼Œåœ¨`ç±»å‹`é€‰å•å†…é€‰æ‹©å¤šé‡åŠ è½½ååœ¨å³ä¸‹è§’ç‚¹å‡»åº”ç”¨å³å¯ï¼›å¦‚æœæ²¡æœ‰è¢«åˆ†é…åˆ™ç›´æ¥å¯ä»¥åœ¨å±æ€§é¡µé¢å†…ç›´æ¥é€‰æ‹©ç±»å‹å¹¶åº”ç”¨

å¦‚æ˜¯è¿›è¡Œæ“ä½œä¹‹åå¾ˆè½»æ¾åœ°å°†æ”»å‡»è€…ä¸»æœºã€ç½‘å…³å’Œ4å°é¶æœºçš„ç£ç›˜é…ç½®äº†å¤šé‡åŠ è½½ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/kaliMultiattach.png)

![screenShot](./img/debianMultiattach.png)

![screenShot](./img/xpMultiattach.png)

æ˜¾ç„¶æˆ‘ä»¬æœ‰6å°è™šæ‹Ÿæœºä½†åªæ”¾äº†3å¼ æˆªå›¾ï¼Œä¸»è¦æ˜¯è€ƒè™‘åˆ°å¤šé‡åŠ è½½çš„ç‰¹æ€§ï¼ŒCSDNçš„é‚£ç¯‡æ–‡ç« è¯´å®è¯æˆ‘æ²¡çœ‹å¤ªæ‡‚ï¼Œä½†å¤§æ¦‚ç†è§£åˆ°å¤šé‡åŠ è½½çš„æ„æ€å°±æ˜¯

>å¯ä»¥ä½¿æ­¤ç±»å‹çš„ç£ç›˜ä»‹è´¨æ‹¥æœ‰â€œåœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œè¢«æ–°å»ºçš„ç›¸åŒç³»ç»Ÿçš„è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨ï¼Œä¾¿å¯å¤åˆ¶å‡ºè¿™ä¸ªæ—¶é—´ç‚¹ä¸Šçš„æ—§çš„ç›¸åŒç³»ç»Ÿçš„è™šæ‹Ÿæœºâ€çš„èƒ½åŠ›

è¯´ç™½äº†æœ‰ç‚¹åƒæ ‘ï¼Œå¤šé‡åŠ è½½çš„ç£ç›˜ä»‹è´¨æ¯è¢«æ–°å»ºçš„è™šæ‹Ÿæœºç›´æ¥å¼•ç”¨å°±ä¼šå¤šä¸€ä¸ªå½“å‰æ—¶é—´ç‚¹çš„å­èŠ‚ç‚¹ğŸ¤”

æ‰€ä»¥å‰©ä½™çš„ç›¸åŒç³»ç»Ÿå‡æ˜¯ç”±åŒä¸€ç£ç›˜ä»‹è´¨å¤åˆ¶å‡ºæ¥çš„ï¼Œè‡ªç„¶ä¹Ÿä¸éœ€è¦é‚£ä¹ˆå¤šæˆªå›¾ï¼ˆè‡ªä¿¡ï¼‰

è®²é“ç†ä¸‡ä¸€é”™äº†å°±å¾ˆå°´å°¬ğŸ˜‚ï¼Œæ‰€ä»¥ä¸ºäº†ä¿é™©èµ·è§æˆ‘ä¸“é—¨å»æŸ¥äº†VirtualBoxçš„æ–‡æ¡£ï¼Œè€Œé‡Œé¢çš„è§£é‡Šé€šä¿—æ˜“æ‡‚ï¼Œæ°å¥½æ˜¯æˆ‘ç†è§£çš„æ„æ€ï¼ŒåŸæ–‡æ˜¯è¿™æ ·è¯´çš„ï¼š

>Multiattach mode images can be attached to more than one virtual machine at the same time, even if these machines are running simultaneously. For each virtual machine to which such an image is attached, a differencing image is created. As a result, data that is written to such a virtual disk by one machine is not seen by the other machines to which the image is attached. Each machine creates its own write history of the multiattach image.

å°±ä¸ç¿»è¯‘äº†ï¼Œæ€»ä¹‹æˆ‘ç†è§£çš„æ²¡é”™ï¼ŒåŒæ—¶å†åæ§½ä¸€ä¸‹CSDNä¸Šçš„æ–‡ç« çœŸçš„ä¸€è¨€éš¾å°½

#### è™šæ‹Ÿæœºç½‘ç»œæ‹“æ‰‘æ­å»º

è¿™é‡Œå…¶å®ä¸å¤ªéš¾ç†è§£ï¼Œåœ¨å®Œæˆä¸Šä¸€æ­¥çš„å†…å®¹æ—¶å·²ç»å°±é¡ºæ‰‹æŠŠç½‘å¡ç»™åˆ†é…äº†ï¼Œè¿˜æ˜¯æŒ‰å›¾è¯´è¯ï¼š

![image](./img/vb-exp-layout.png)

é¦–å…ˆå›¾ç‰‡é‡Œé¢æœ‰ä¸¤ä¸ª`å†…éƒ¨ç½‘ç»œ`ï¼Œé‡Œé¢åˆ†åˆ«æœ‰ä¸¤å°ç³»ç»Ÿä¸ä¸€æ ·çš„é¶æœºï¼Œæˆ‘æ²¡æœ‰æ“…è‡ªä¿®æ”¹å¤ªå¤šï¼Œç›´æ¥ç…§ç€å›¾è¿›è¡Œæ‘†æ”¾ï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒç”¨å¤æ‚åŒ–çš„Packet Tracerï¼Œåªèƒ½é€šè¿‡æ‰‹åŠ¨è®¾ç½®ç½‘å¡æ¥åˆ’åˆ†å­ç½‘çš„é‚£ç§ğŸ¤”

å›¾ä¸Šå·¦ä¾§é»„è‰²éƒ¨åˆ†çš„`Internal Network 1`æˆ‘åœ¨VirtualBoxç½‘å¡é…ç½®æ—¶ç»™çš„åç§°ä¸º`intnet0`ï¼Œå³ä¸Šä¾§ç°è‰²çš„`Internal Network 2`åˆ™æ˜¯è¢«æˆ‘é…ç½®ä¸º`intnet1`ï¼Œä¸¤ä¸ªå†…éƒ¨ç½‘ç»œä¸­çš„é¶æœºåˆ†åˆ«ä»…é…ç½®ä¸€å¼ `å†…éƒ¨ç½‘ç»œ`è¿æ¥æ–¹å¼çš„ç½‘å¡ï¼Œç½‘ç»œåç§°åˆ†åˆ«è®¾ç½®ä¸ºå¯¹åº”å†…ç½‘çš„åç§°ï¼Œäºæ˜¯ä¸¤ä¸ªå†…ç½‘é¦–å…ˆè®¾ç½®å®Œæ¯•

ç„¶åæ˜¯ç½‘å…³éƒ¨åˆ†ï¼Œä¸Šè¯¾æ—¶å¿«é€Ÿè®°å¿†ä¸‹æ¥äº†ç½‘å…³æ‰€éœ€çš„4å¼ ç½‘å¡çš„é…ç½®æ–¹å¼ï¼Œè¿™é‡Œç›´æ¥é…ç½®ï¼š

- ç½‘å¡1ï¼šNATè¿æ¥æ–¹å¼ï¼Œç”¨äºè¿æ¥å¤–ç½‘

- ç½‘å¡2ï¼šHost-Onlyç½‘ç»œï¼Œç”¨äºå®¿ä¸»æœºSSHè¿æ¥

- ç½‘å¡3ï¼šå†…éƒ¨ç½‘ç»œ`intnet0`ï¼Œç”¨äºè·¯ç”±`Internal Network 1`

- ç½‘å¡4ï¼šå†…éƒ¨ç½‘ç»œ`intnet1`ï¼Œç”¨äºè·¯ç”±`Internal Network 2`

æœ€åæ˜¯æ”»å‡»è€…ä¸»æœºéƒ¨åˆ†ï¼Œè¿™ä¸ªæ˜¾ç„¶æ˜¯åªè¿æ¥äº†å¤–ç½‘æ‰€ä»¥åªéœ€è¦é…ç½®ä¸€å¼ NATæ–¹å¼çš„ç½‘å¡å³å¯

è¿™é‡Œå…¶å®æœ‰ä¸€ç‚¹`æ•£è£…é»‘ç›’`çš„æ„æ€ï¼šç”±äºç›´æ¥å¯¼å…¥ä½¿ç”¨äº†è€å¸ˆæä¾›çš„ç£ç›˜ä»‹è´¨ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å®‰è£…ä¸é…ç½®è¿‡ç¨‹å¹¶ä¸æ˜¯ç”±æˆ‘å®Œæˆï¼Œåœ¨å®Œæˆè¿™éƒ¨åˆ†é…ç½®çš„è¿‡ç¨‹ä¸­æˆ‘æ‰€å‡ºçš„åŠ›ä»…åœ¨äº`æ–°å»ºè™šæ‹Ÿæœº`+`æŒ‰éœ€è®¾ç½®ç½‘å¡`ï¼Œè€Œå…³äºç½‘å…³è®¾å¤‡`gateway-debian`ç³»ç»Ÿå†…æœ€åˆçš„ç½‘å¡ç¡¬ä»¶å›ºå®šIPåœ°å€åˆ†é…ä¸ä¸¤ä¸ªå†…ç½‘å¯¹äºå¤–ç½‘æ”»å‡»è€…`attacker-kali`çš„å±è”½åˆ†æµä¸¤éƒ¨åˆ†å†…å®¹åˆ™æ˜¯æ²¡æœ‰åœ¨æ„ï¼Œç£ç›˜ä»‹è´¨å®Œå…¨æ˜¯è¢«å½“ä½œé»‘ç›’ç›´æ¥æ‹¿æ¥ä½¿ç”¨äº†ğŸ˜‚

é…ç½®å®Œæˆä¹‹åè¿™é‡Œåˆ†åˆ«æ”¾ä¸Š6å°è™šæ‹Ÿæœºçš„ç³»ç»Ÿå†…IPé…ç½®ï¼Œåº”è¯¥å°±è¶³ä»¥è¯´æ˜ç½‘ç»œçš„é…ç½®æƒ…å†µäº†ï¼š

Virtual Machine|IP Configuration Screenshot
:-:|:-:
attacker-kali|![screenShot](./img/attackerKaliIP.png)
gateway-debian|![screenShot](./img/gatewayDebianIP.png)
victim-kali|![screenShot](./img/victimKaliIP.png)
victim-xp-1|![screenShot](./img/victimXP1IP.png)
victim-debian|![screenShot](./img/victimDebianIP.png)
victim-xp-2|![screenShot](./img/victimXP2IP.png)

### ç½‘ç»œè¿é€šæ€§ç›®æ ‡è¦æ±‚å®ç°

ä¼—æ‰€å‘¨çŸ¥ï¼š

>è¿é€šæ€§=èƒ½`ping`é€š

æ‰€ä»¥ä»¥ä¸‹çš„è¿é€šæ€§ç›¸å…³ç›®æ ‡æµ‹è¯•å‡é€šè¿‡è¿™æ¡å¤è€ä½†æ˜¯æœ‰æ•ˆçš„å‘½ä»¤å®ç°

#### é¶æœºå¯ä»¥ç›´æ¥è®¿é—®æ”»å‡»è€…ä¸»æœº

ç¿»è¯‘ä¸€ä¸‹ï¼Œéœ€è¦4å°é¶æœºèƒ½pingé€šæ”»å‡»è€…ä¸»æœº`attacker-kali`

é¦–å…ˆä»ä¸Šä¸€æ­¥çš„æ“ä½œä¸­å¾—çŸ¥`attacker-kali`çš„IPåœ°å€æ˜¯`10.0.2.15`ï¼Œç”±äºWindowsç³»ç»Ÿé»˜è®¤åªæ‰§è¡Œ4æ¬¡pingåŒ…å‘é€ï¼Œäºæ˜¯è®¡åˆ’åœ¨4å°é¶ä¸­çš„Linuxæœºå™¨ä¸­æ‰§è¡Œpingå‘½ä»¤æ—¶ä¹Ÿæ·»åŠ `-c 4`æ¥é™åˆ¶pingæ¬¡æ•°

~~(ç”µè„‘æ­»æœºäº†ï¼Œåˆ°è¿™é‡Œæ˜¯ä¹‹å‰å†™çš„å†…å®¹ï¼Œå¥½å¤šè¯æ˜ç”¨çš„è™šæ‹ŸæœºçŠ¶æ€æ— äº†ï¼Œæ™šç‚¹å†ç»§ç»­å†™)~~

å†æ¬¡æ‰“å¼€VirtualBoxï¼Œä¸¤å°é¶æœºXPç›´æ¥åºŸäº†ï¼Œè½½å…¥ç‚¹é”™è¯¯ğŸ¤¯

æ˜¾ç„¶ä¸åƒæ˜¯èƒ½æ‰‹åŠ¨ä¿®å¤çš„é”™è¯¯ï¼Œäºæ˜¯ç›´æ¥åˆ æ‰æ–°å»ºäº†

~~å…¶å®è¿™é‡Œè¿˜æ­»æœºäº†ä¸€æ¬¡ï¼Œæ’æŸ¥äº†ä¸€ä¸‹å¯èƒ½æ˜¯Windowsçš„ä¼‘çœ æœºåˆ¶å¯¼è‡´çš„é—®é¢˜ï¼Œæ€»ä¹‹è¿›è¡Œäº†ä¸€ç•ªå¤„ç†ï¼Œå¸Œæœ›ä¸è¦å†æœ‰äº‹äº†~~

è¨€å½’æ­£ä¼ ï¼Œç›®æ ‡æ˜¯åœ¨4å°é¶æœºä¸Šåˆ†åˆ«æ‰§è¡Œ`ping 10.0.2.15 -c 4`ï¼Œä½†æ˜¯åœ¨é‡æ–°è°ƒè¯•è™šæ‹Ÿæœºåå‘ç°ï¼Œç”¨äº†NATç½‘å¡çš„`attacker-kali`å’Œ`gateway-debian`ä¸¤å°æœºå™¨çš„IPv4åœ°å€å‡ä¸º`10.0.2.15`ï¼Œä¸å‡ºæ„å¤–æ˜¯é€šè¿‡åŒä¸€IPçš„ä¸åŒç«¯å£å®ç°äº†ç½‘ç»œè¿æ¥ï¼Œæ€è€ƒäº†ä¸€ä¸‹æ„Ÿè§‰ä¸Šé¢çš„æ–¹æ³•æ˜¯æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åˆå‘ç°ç”±äºIPv6çš„ç‰¹æ€§ï¼Œä¸¤å°æœºå™¨çš„IPv6åœ°å€æ˜¯ä¸åŒçš„ï¼Œäºæ˜¯è½¬å¿µå°è¯•é€šè¿‡ping`attacker-kali`çš„IPv6åœ°å€æ¥æµ‹è¯•è¿é€šæ€§

å†ä¸€æ¬¡é¦–å…ˆï¼Œé€šè¿‡`ip a`å‘½ä»¤å¾—çŸ¥äº†`attacker-kali`çš„IPv6åœ°å€ä¸º`fe80::8c14:ef63:b3f5:11bc`ï¼Œå…¶æ¬¡æ˜¯å¯¹2å°XPé¶æœºå¯ç”¨IPv6ï¼Œé€šè¿‡`æ§åˆ¶é¢æ¿`>`ç½‘ç»œè¿æ¥`æ‰¾åˆ°`æœ¬åœ°è¿æ¥`å³é”®ç‚¹å‡»`å±æ€§`ï¼Œåœ¨`å¸¸è§„`é¡µé¢ä¸‹ç‚¹å‡»`å®‰è£…`ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸Šæ–¹é€‰æ¡†å†…ç‚¹å‡»`åè®®`ç„¶åç‚¹å‡»`æ·»åŠ `æŒ‰é’®ï¼Œåœ¨æ–°çš„å¼¹å‡ºçª—å£ä¸­é€‰æ‹©ç¬¬ä¸€é¡¹`Microsoft TCP/IP ç‰ˆæœ¬6`ç„¶åç‚¹å‡»`ç¡®å®š`æŒ‰é’®ï¼Œéšåç‚¹å‡»`å…³é—­`æŒ‰é’®é€€å‡ºæœ¬åœ°è¿æ¥çš„å±æ€§çª—å£ï¼Œå›åˆ°`cmd`å†æ¬¡ä½¿ç”¨`ipconfig /all`å‘ç°æœ¬åœ°è¿æ¥å·²ç»æœ‰äº†IPv6åœ°å€äº†

â€œäºæ˜¯ä¾¿å¯ä»¥åœ¨4å°é¶æœºä¸Šé€šè¿‡Pv6åœ°å€ç¡®è®¤è¿é€šæ€§äº†â€ï¼ŒåŸæœ¬æ˜¯æ‰“ç®—è¿™ä¹ˆè¯´çš„ï¼Œä½†æ˜¯å‘ç°å¯¼å…¥çš„`gateway-debian`é‡Œé¢å°±æ²¡æœ‰é…ç½®`ip6tables`ï¼Œå±äºæ˜¯æˆ‘è‡ªæ‰¾éº»çƒ¦äº†ï¼Œç›´æ¥pingé‚£ä¸ªé‡å¤çš„IPv4åœ°å€å§ï¼Œæˆ‘æ”¾å¼ƒäº†(å…¶å®æ˜¯æˆ‘æ‡’å¾—å»é…`ip6tables`ï¼Œè‡³å°‘å†™æŠ¥å‘Šè¿™ä¼šå„¿ä¸æƒ³æ)

ä»¥ä¸‹ä¸ºé¶æœºpingæ”»å‡»è€…çš„ç»“æœæˆªå›¾ï¼š

Victim|Screenshot
:-:|:-:
victim-kali|![screenShot](./img/victimKaliPingAttacker.png)
victim-xp-1|![screenShot](./img/victimXP1PingAttacker.png)
victim-debian|![screenShot](./img/victimDebianPingAttacker.png)
victim-xp-2|![screenShot](./img/victimXP2PingAttacker.png)

>2022/9/19 Update  
>æŒºæ—©å°±çœ‹å®Œäº†å®éªŒçš„è®²è§£è§†é¢‘ï¼Œä¹Ÿå¾ˆæ—©åœ¨PRé‡Œé¢è¿½åŠ äº†è¦ä¿®æ”¹è¿™éƒ¨åˆ†å†…å®¹çš„è¯„è®ºï¼Œæ­£å¼ä¿®æ”¹ç»ˆäºè¿˜æ˜¯æ‹–åˆ°äº†DDLğŸ˜¶

éœ€è¦ä¿®æ­£çš„éƒ¨åˆ†æ˜¯æœ‰å…³`attacker-kali`å’Œ`gateway-debian`ä¸¤å°æœºå™¨çš„å¤–ç½‘ç½‘å¡é…ç½®ï¼Œè¿™é‡Œç”¨è¿½åŠ çš„å½¢å¼ç»§ç»­è¿›è¡Œè®°å½•

å‰æ–‡çš„å†…å®¹å¯ä»¥è¯´æ˜ï¼Œæˆ‘è‡ªå·±æ£é¼“çš„é…ç½®æ˜¯å®Œå…¨è¸©å‘åˆ°NATç½‘å¡ä¸Šï¼Œè¿™é‡Œæ”¾ä¸ŠVirtualBoxå®˜ç½‘æ–‡æ¡£å¯¹ç½‘å¡åŠŸèƒ½æ€§çš„æè¿°ï¼Œéå¸¸ç›´è§‚ï¼š

>Table 6.1. Overview of Networking Modes  
>Mode|VMâ†’Host|VMâ†Host|VM1â†”VM2|VMâ†’Net/LAN|VMâ†Net/LAN
>:-:|:-:|:-:|:-:|:-:|:-:
>Host-only|+|+|+|-|-
>Internal|-|-|+|-|-
>Bridged|+|+|+|+|+
>NAT|+|[Port forward](https://www.virtualbox.org/manual/ch06.html#natforward)|-|+|[Port forward](https://www.virtualbox.org/manual/ch06.html#natforward)
>NATservice|+|[Port forward](https://www.virtualbox.org/manual/ch06.html#natforward)|+|+|[Port forward](https://www.virtualbox.org/manual/ch06.html#natforward)

å½“ç„¶è§†é¢‘é‡Œé¢ä¹Ÿæœ‰è®²åˆ°ï¼ŒNATç›¸å½“äºæ¯å°è™šæ‹Ÿæœºè¿æ¥åˆ°ä¸åŒçš„äº¤æ¢æœºä¸Šï¼Œè€ŒNATç½‘ç»œåˆ™æ˜¯å¯ä»¥é€šè¿‡é…ç½®ä¸åŒçš„NATç½‘ç»œæ ‡è¯†æ¥å®ç°å¤šå°è™šæ‹Ÿæœºè¿æ¥åˆ°åŒä¸€å°äº¤æ¢æœºä¸Šï¼Œäºæ˜¯è¿™æ¬¡ä¿®æ­£çš„å…·ä½“æ“ä½œæ˜¯åœ¨VirtualBoxçš„`ç®¡ç†`>`å…¨å±€è®¾ç½®`>`ç½‘ç»œ`å†…æ–°å»ºä¸€ä¸ªNATç½‘ç»œ`NatNetwork1`ï¼Œåˆ†é…ç½‘æ®µä¸º`10.0.3.0/24`ï¼Œè€ŒåŸæœ‰çš„`NatNetwork`åˆ™ä¸æ”¹å˜åŸåˆ†é…çš„ç½‘æ®µ`10.0.2.0/24`ï¼Œä½†æ˜¯è¦æ”¹åä¸º`NatNetwork0`(ä¸€äº›å¼ºè¿«ç—‡çš„é“ç†ğŸ˜‚)ï¼Œå…·ä½“é…ç½®å¯ä»¥çœ‹ä¸‹é¢çš„æˆªå›¾ï¼š

NAT Network|Configuration Screenshot
:-:|:-:
NatNetwork0|![screenShot](./img/nat0.png)
NatNetwork1|![screenShot](./img/nat1.png)

ç„¶åæ˜¯ä¿®æ”¹`attacker-kali`ä»…æœ‰çš„ä¸€å—çš„ç½‘å¡ä¸º`NATç½‘ç»œï¼Œ'NatNetwork1'`ï¼Œè€Œ`gateway-debian`åˆ™æ˜¯å°†åŸæœ¬çš„NATç½‘å¡æ”¹ä¸º`NATç½‘ç»œï¼Œ'NatNetwork0'`ï¼Œå…¶ä»–é…ç½®ä¸å˜ï¼Œç›®æ ‡ä»ç„¶æ˜¯è®©`attacker-kali`èƒ½å¤Ÿè¢«4å°é¶æœºè®¿é—®åˆ°ï¼Œæ“ä½œä¹Ÿä»ç„¶æ˜¯4å°é¶æœºåˆ†åˆ«ping`attacker-kali`çš„IP...

å¾ˆæ˜¾ç„¶åˆ°è¿™é‡Œæˆ‘æ‰å‘ç°å‰é¢çš„ç†è§£å‡ºäº†å¤§é—®é¢˜ï¼Œä¹‹æ‰€ä»¥èƒ½å‘ç°ä¹Ÿæ˜¯å› ä¸ºæŒ‰ç…§ä¸Šé¢çš„æ€è·¯é…ç½®ä¹‹åå‘ç°ä¸¤ä¸ªNATç½‘ç»œçš„è™šæ‹Ÿæœºå¹¶ä¸èƒ½äº’ç›¸pingé€šï¼Œå¤§æ¦‚æŸ¥äº†ä¸€äº›å…³äºä¸åŒNATç½‘ç»œä¹‹é—´è¿é€šæ€§çš„å†…å®¹åå‘ç°è¿˜æ˜¯å›åˆ°ä¸Šé¢çš„`Table 6.1. Overview of Networking Modes`ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ç«¯å£è½¬å‘æ¥å®ç°ï¼Œæ‰€ä»¥æˆ‘åˆé‡æ–°çœ‹äº†ä¸€ä¸‹å®éªŒè®²è§£çš„è§†é¢‘ï¼Œå‘ç°å…¶å®æ˜¯é…ç½®åœ¨åŒä¸€ä¸ªNATç½‘ç»œä¸Šå°±è¡Œäº†ï¼Œæ‰€ä»¥ä¸Šé¢è®¾ç½®å¥½çš„ä¸¤ä¸ªNATç½‘ç»œå°±ç•™ä¸€ä¸ªåƒç°å§ï¼Œç°åœ¨åªéœ€è¦ç»™`attacker-kali`å’Œ`gateway-debian`åˆ†é…åˆ°åŒä¸€ä¸ªNATç½‘ç»œå°±è¡Œï¼Œé‡å¯è™šæ‹Ÿæœºåå‘ç°ä¸€åˆ‡æ­£å¸¸ï¼Œå…³äºä¸¤å°ä½¿ç”¨NATç½‘ç»œçš„è™šæ‹Ÿæœºçš„IPï¼Œ`attacker-kali`ä»ç„¶æ˜¯ä¹‹å‰çš„`10.0.2.15`ï¼Œ`gateway-debian`åˆ™å˜æˆäº†`10.0.2.4`

ä»¥ä¸‹æ˜¯æ–°çš„è¿é€šæ€§æµ‹è¯•æˆªå›¾ï¼š

Victim|Screenshot
:-:|:-:
victim-kali|![screenShot](./img/newVictimKaliPingAttacker.png)
victim-xp-1|![screenShot](./img/newVictimXP1PingAttacker.png)
victim-debian|![screenShot](./img/newVictimDebianPingAttacker.png)
victim-xp-2|![screenShot](./img/newVictimXP2PingAttacker.png)

#### æ”»å‡»è€…ä¸»æœºæ— æ³•ç›´æ¥è®¿é—®é¶æœº

æ€è·¯ä¸Šå¾ˆå¥½ç†è§£ï¼Œä»`attacker-kali`æ— æ³•pingé€š4å°é¶æœºï¼Œæ“ä½œä¸Šåˆ™æ˜¯åˆ†åˆ«åœ¨4å°é¶æœºä¸Šè·å–å¤–ç½‘IPï¼Œéšååœ¨`attacker-kali`ä¸Šå‘é€pingåŒ…ï¼Œä»ç„¶æ˜¯ä½¿ç”¨`-c 4`æ¥é™åˆ¶pingæ¬¡æ•°ä¸º4æ¬¡ï¼Œä»¥ä¸‹ä¸ºç»“æœæˆªå›¾ï¼š

Victim|Target IP|Screenshot
:-:|:-:|:-:
victim-kali|172.16.111.146|![screenShot](./img/attackerPingVictimKali.png)
victim-xp-1|172.16.111.102|![screenShot](./img/attackerPingVictimXP1.png)
victim-debian|172.16.222.147|![screenShot](./img/attackerPingVictimDebian.png)
victim-xp-2|172.16.222.114|![screenShot](./img/attackerPingVictimXP2.png)

#### ç½‘å…³å¯ä»¥ç›´æ¥è®¿é—®æ”»å‡»è€…ä¸»æœºå’Œé¶æœº

æ€è·¯ï¼šåœ¨`gateway-debian`ä¸Šå‘`attacker-kali`ä»¥åŠ4å°é¶æœºåˆ†åˆ«å‘é€pingåŒ…å¹¶èƒ½æ­£å¸¸æ¥æ”¶

è¿™é‡Œæœ‰ä¸€ä¸ªå°å‘çš„ï¼Œä¹‹å‰æ“ä½œçš„æ—¶å€™å‘ç°ï¼Œåªæœ‰ä¸¤å°XPçš„é¶æœºä¸èƒ½è¢«`gateway-debian`pingé€šï¼Œç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯é˜²ç«å¢™é—®é¢˜ï¼Œåˆ°è¿™é‡Œå®Œå…¨æ˜¯ä½¿ç”¨ç»éªŒæ”¯æ’‘æˆ‘å°è¯•åœ¨`æ§åˆ¶é¢æ¿`>`ç½‘ç»œå’ŒInternetè¿æ¥`>`Windowsé˜²ç«å¢™`>`é«˜çº§`>`ICMPè®¾ç½®`é‡Œé¢å¯ç”¨`å…è®¸ä¼ å…¥è·¯ç”±å™¨è¯·æ±‚`ï¼Œéšåå‘ç°ä»ç„¶ä¸èƒ½pingé€šï¼Œäºæ˜¯åˆå°è¯•åŒæ—¶æ‰“å¼€äº†`å…è®¸ä¼ å…¥å›æ˜¾è¯·æ±‚`ï¼Œæ­¤æ—¶å°±å¯ä»¥pingé€šäº†ï¼ŒåŒæ—¶ä¸ºäº†ç¡®è®¤ä¸Šé¢å¯ç”¨çš„ä¸¤ä¸ªé€‰é¡¹åˆ°åº•å“ªä¸ªæ˜¯çœŸæ­£å…è®¸pingé€šçš„é€‰é¡¹ï¼Œæˆ‘åˆå°è¯•é€šè¿‡æ§åˆ¶å˜é‡ï¼šå…³æ‰äº†`å…è®¸ä¼ å…¥è·¯ç”±å™¨è¯·æ±‚`è€Œåªä¿ç•™`å…è®¸ä¼ å…¥å›æ˜¾è¯·æ±‚`ï¼Œç„¶åå†æ¬¡å°è¯•ä»`gateway-debian`å‘é€pingåŒ…ï¼Œå‘ç°ä»ç„¶å¯ä»¥pingé€šï¼Œäºæ˜¯ç¡®ä¿¡åªéœ€è¦å¯ç”¨åè€…å³å¯

è¿™é‡Œå®Œå…¨å°±æ˜¯å½“æ—¶çš„æˆ‘ä¸ä»”ç»†çœ‹ï¼Œåœ¨`ICMPè®¾ç½®`çª—å£ï¼Œå¦‚æœæ­¤æ—¶å…‰æ ‡åœç•™åœ¨`å…è®¸ä¼ å…¥å›æ˜¾è¯·æ±‚`ä¸Šï¼Œé€‰æ‹©æ¡†ä¸‹æ–¹çš„`æè¿°`å…¶å®å°±æœ‰æ¸…æ¥šåœ°è¯´æ¸…æ¥šæ‰€é€‰é¡¹ç›®çš„åŠŸèƒ½ï¼Œä»¥ä¸‹å°±æ˜¯æè¿°åŸæ–‡ï¼š

>é€åˆ°è¿™ä¸ªè®¡ç®—æœºçš„æ¶ˆæ¯å°†è¢«é‡å¤å‘é€ç»™å‘ä»¶äººã€‚è¿™å¸¸ç”¨äºç–‘éš¾è§£ç­”--ä¾‹å¦‚ï¼Œpingè®¡ç®—æœºã€‚å¦‚æœå¯ç”¨äº†TCPç«¯å£446ï¼Œæ­¤ç±»è¯·æ±‚è¢«è‡ªåŠ¨å…è®¸ã€‚

æ‰€ä»¥è¯´è¿˜æ˜¯è¦æœ‰è€å¿ƒä»¥åŠè¦ç»†å¿ƒğŸ˜‚

ä»¥ä¸‹æ˜¯æ“ä½œç»“æœæˆªå›¾ï¼š

Target|Target IP|Screenshot
:-:|:-:|:-:
attacker-kali|10.0.2.15|![screenShot](./img/gatewayPingAttacker.png)
victim-kali|172.16.111.146|![screenShot](./img/gatewayPingVictimKali.png)
victim-xp-1|172.16.111.102|![screenShot](./img/gatewayPingVictimXP1.png)
victim-debian|172.16.222.147|![screenShot](./img/gatewayPingVictimDebian.png)
victim-xp-2|172.16.222.114|![screenShot](./img/gatewayPingVictimXP2.png)

#### é¶æœºçš„æ‰€æœ‰å¯¹å¤–ä¸Šä¸‹è¡Œæµé‡å¿…é¡»ç»è¿‡ç½‘å…³

åšå®éªŒé‚£ä¼šå„¿è¿˜è®°å¾—ä¸Šè¯¾è¯´çš„ï¼Œå¯ä»¥é€šè¿‡`tcpdump`æ¥å®Œæˆ`gateway-debian`ä¸Šç½‘å¡3ã€ç½‘å¡4çš„æµé‡æŠ“åŒ…ï¼Œä¹Ÿå°±æ˜¯åˆ†åˆ«å¯¹åº”`intnet0`å’Œ`intnet1`çš„è·¯ç”±æŠ“åŒ…æ¥è¯æ˜æµé‡ç¡®å®ç»è¿‡ç½‘å…³ï¼Œäºæ˜¯ç›´æ¥æŸ¥äº†ä¸€ä¸‹`tcpdump`çš„åŸºæœ¬ç”¨æ³•ï¼Œå¹¶ä½¿ç”¨shellçš„é‡å®šå‘è¾“å‡º`>>`å°†æŠ“åˆ°çš„åŒ…ä¿å­˜åˆ°æœ¬åœ°çš„ä¸¤ä¸ªtxtæ–‡ä»¶å†…æ–¹ä¾¿ç›´æ¥æ˜æ–‡æŸ¥çœ‹ï¼Œç„¶åä¸ºäº†æ–¹ä¾¿å‘`gateway-debian`å®‰è£…äº†å¢å¼ºä»¶åæ·»åŠ äº†å®¿ä¸»æœºçš„å…±äº«æ–‡ä»¶å¤¹è‡ªåŠ¨æŒ‚è½½ï¼Œäºæ˜¯å¯ä»¥éå¸¸è½»æ¾åœ°è·å¾—ä¸¤ä¸ªå†…ç½‘æŠ“åŒ…çš„è®°å½•ï¼Œä¸‹é¢ç›´æ¥æ”¾ä¸Šæ–‡ä»¶å†…å®¹ï¼š

- intnet0.txt

  ```plaintext
  #æˆ‘çŸ¥é“è¿™ä¸ªä¸æ˜¯æ³¨é‡Šçš„å†™æ³•ä½†æ˜¯è¿˜æ˜¯æƒ³è¿™ä¹ˆå†™ğŸ˜‚
  #è¿™é‡Œæ˜¯intnet0ç½‘ç»œçš„æŠ“åŒ…è®°å½•
  #ç”±äºæ˜¯æ—©æœŸå®Œæˆçš„æŠ“åŒ…æ‰€ä»¥IPåœ°å€å¯èƒ½å’Œåé¢é‡æ–°é…ç½®é¶æœºä¹‹åçš„IPåœ°å€ä¸ä¸€æ ·
  #ä¸ºäº†åŒºåˆ†intnet0å†…çš„2å°é¶æœºï¼Œæˆ‘è®©å…¶ä¸­ä¸€å°pingç™¾åº¦(baidu.com)ï¼Œä¸€å°pingäº¬ä¸œ(jd.com)
  #å¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹åˆ°DNSè§£æä¸ICMPçš„è¯·æ±‚å’Œè¿”å›è®°å½•
  21:26:20.117207 IP 172.16.111.146.43796 > 172.16.111.1.domain: 16147+ A? baidu.com. (27)
  21:26:20.117232 IP 172.16.111.146.43796 > 172.16.111.1.domain: 36369+ AAAA? baidu.com. (27)
  21:26:20.121877 IP 172.16.111.1.domain > 172.16.111.146.43796: 16147* 2/0/1 A 110.242.68.66, A 39.156.66.10 (468)
  21:26:20.122206 IP 172.16.111.1.domain > 172.16.111.146.43796: 36369* 0/0/0 (27)
  21:26:20.126276 IP 172.16.111.146 > 110.242.68.66: ICMP echo request, id 33068, seq 1, length 64
  21:26:20.207219 IP 110.242.68.66 > 172.16.111.146: ICMP echo reply, id 33068, seq 1, length 64
  21:26:20.208281 IP 172.16.111.146.42128 > 172.16.111.1.domain: 50845+ PTR? 66.68.242.110.in-addr.arpa. (44)
  21:26:20.208526 IP 172.16.111.1.domain > 172.16.111.146.42128: 50845 NXDomain 0/0/0 (44)
  21:26:21.127262 IP 172.16.111.146 > 110.242.68.66: ICMP echo request, id 33068, seq 2, length 64
  21:26:21.209156 IP 110.242.68.66 > 172.16.111.146: ICMP echo reply, id 33068, seq 2, length 64
  21:26:21.210638 IP 172.16.111.146.44079 > 172.16.111.1.domain: 51957+ PTR? 66.68.242.110.in-addr.arpa. (44)
  21:26:21.210951 IP 172.16.111.1.domain > 172.16.111.146.44079: 51957 NXDomain 0/0/0 (44)
  21:26:22.127570 IP 172.16.111.146 > 110.242.68.66: ICMP echo request, id 33068, seq 3, length 64
  21:26:22.206884 IP 110.242.68.66 > 172.16.111.146: ICMP echo reply, id 33068, seq 3, length 64
  21:26:22.207934 IP 172.16.111.146.42263 > 172.16.111.1.domain: 20100+ PTR? 66.68.242.110.in-addr.arpa. (44)
  21:26:22.208240 IP 172.16.111.1.domain > 172.16.111.146.42263: 20100 NXDomain 0/0/0 (44)
  21:26:23.128345 IP 172.16.111.146 > 110.242.68.66: ICMP echo request, id 33068, seq 4, length 64
  21:26:23.213621 IP 110.242.68.66 > 172.16.111.146: ICMP echo reply, id 33068, seq 4, length 64
  21:26:23.214949 IP 172.16.111.146.43618 > 172.16.111.1.domain: 19141+ PTR? 66.68.242.110.in-addr.arpa. (44)
  21:26:23.215247 IP 172.16.111.1.domain > 172.16.111.146.43618: 19141 NXDomain 0/0/0 (44)
  21:26:25.282001 ARP, Request who-has 172.16.111.146 tell 172.16.111.1, length 28
  21:26:25.283978 ARP, Reply 172.16.111.146 is-at 08:00:27:23:42:bd (oui Unknown), length 46
  21:26:25.303471 ARP, Request who-has 172.16.111.1 tell 172.16.111.146, length 46
  21:26:25.303483 ARP, Reply 172.16.111.1 is-at 08:00:27:98:a6:15 (oui Unknown), length 28
  21:26:25.610008 ARP, Request who-has 172.16.111.1 tell 172.16.111.140, length 46
  21:26:25.610020 ARP, Reply 172.16.111.1 is-at 08:00:27:98:a6:15 (oui Unknown), length 28
  21:26:25.611091 IP 172.16.111.140.1030 > 172.16.111.1.domain: 56938+ A? jd.com. (24)
  21:26:25.615184 IP 172.16.111.1.domain > 172.16.111.140.1030: 56938* 4/0/1 A 211.144.27.126, A 211.144.24.218, A 111.13.149.108, A 106.39.171.134 (468)
  21:26:25.618838 IP 172.16.111.140 > 211.144.27.126: ICMP echo request, id 512, seq 7936, length 40
  21:26:25.721489 IP 211.144.27.126 > 172.16.111.140: ICMP echo reply, id 512, seq 7936, length 40
  21:26:26.618161 IP 172.16.111.140 > 211.144.27.126: ICMP echo request, id 512, seq 8192, length 40
  21:26:26.722469 IP 211.144.27.126 > 172.16.111.140: ICMP echo reply, id 512, seq 8192, length 40
  21:26:27.619195 IP 172.16.111.140 > 211.144.27.126: ICMP echo request, id 512, seq 8448, length 40
  21:26:27.721270 IP 211.144.27.126 > 172.16.111.140: ICMP echo reply, id 512, seq 8448, length 40
  21:26:28.620290 IP 172.16.111.140 > 211.144.27.126: ICMP echo request, id 512, seq 8704, length 40
  21:26:28.725915 IP 211.144.27.126 > 172.16.111.140: ICMP echo reply, id 512, seq 8704, length 40
  ```

- intnet1.txt

  ```plaintext
  #è¿™é‡Œæ˜¯intnet1ç½‘ç»œçš„æŠ“åŒ…è®°å½•
  #åŒä¸Šä»ç„¶æ˜¯ä¸€å°é¶æœºpingç™¾åº¦ï¼Œä¸€å°é¶æœºpingäº¬ä¸œ
  21:27:26.275739 IP 172.16.222.147.44220 > 172.16.222.1.domain: 4020+ A? baidu.com. (27)
  21:27:26.276414 IP 172.16.222.1.domain > 172.16.222.147.44220: 4020 2/0/0 A 39.156.66.10, A 110.242.68.66 (59)
  21:27:26.276502 IP 172.16.222.147.44220 > 172.16.222.1.domain: 33210+ AAAA? baidu.com. (27)
  21:27:26.281054 IP 172.16.222.1.domain > 172.16.222.147.44220: 33210* 0/0/0 (27)
  21:27:26.284579 IP 172.16.222.147 > 39.156.66.10: ICMP echo request, id 603, seq 1, length 64
  21:27:26.338470 IP 39.156.66.10 > 172.16.222.147: ICMP echo reply, id 603, seq 1, length 64
  21:27:26.339720 IP 172.16.222.147.46411 > 172.16.222.1.domain: 9728+ PTR? 10.66.156.39.in-addr.arpa. (43)
  21:27:26.344247 IP 172.16.222.1.domain > 172.16.222.147.46411: 9728 NXDomain* 0/0/1 (468)
  21:27:27.285629 IP 172.16.222.147 > 39.156.66.10: ICMP echo request, id 603, seq 2, length 64
  21:27:27.338815 IP 39.156.66.10 > 172.16.222.147: ICMP echo reply, id 603, seq 2, length 64
  21:27:28.286734 IP 172.16.222.147 > 39.156.66.10: ICMP echo request, id 603, seq 3, length 64
  21:27:28.340387 IP 39.156.66.10 > 172.16.222.147: ICMP echo reply, id 603, seq 3, length 64
  21:27:29.289250 IP 172.16.222.147 > 39.156.66.10: ICMP echo request, id 603, seq 4, length 64
  21:27:29.343245 IP 39.156.66.10 > 172.16.222.147: ICMP echo reply, id 603, seq 4, length 64
  21:27:31.330275 ARP, Request who-has 172.16.222.147 tell 172.16.222.1, length 28
  21:27:31.331046 ARP, Reply 172.16.222.147 is-at 08:00:27:94:49:f1 (oui Unknown), length 46
  21:27:31.482187 ARP, Request who-has 172.16.222.1 tell 172.16.222.147, length 46
  21:27:31.482204 ARP, Reply 172.16.222.1 is-at 08:00:27:cf:20:e9 (oui Unknown), length 28
  21:27:36.117414 ARP, Request who-has 172.16.222.1 tell 172.16.222.146, length 46
  21:27:36.117433 ARP, Reply 172.16.222.1 is-at 08:00:27:cf:20:e9 (oui Unknown), length 28
  21:27:36.119060 IP 172.16.222.146.1040 > 172.16.222.1.domain: 23353+ A? jd.com. (24)
  21:27:36.122396 IP 172.16.222.1.domain > 172.16.222.146.1040: 23353* 4/0/1 A 211.144.27.126, A 211.144.24.218, A 111.13.149.108, A 106.39.171.134 (468)
  21:27:36.209770 IP 172.16.222.146 > 211.144.27.126: ICMP echo request, id 512, seq 1024, length 40
  21:27:36.315731 IP 211.144.27.126 > 172.16.222.146: ICMP echo reply, id 512, seq 1024, length 40
  21:27:37.232167 IP 172.16.222.146 > 211.144.27.126: ICMP echo request, id 512, seq 1280, length 40
  21:27:37.337317 IP 211.144.27.126 > 172.16.222.146: ICMP echo reply, id 512, seq 1280, length 40
  21:27:38.263422 IP 172.16.222.146 > 211.144.27.126: ICMP echo request, id 512, seq 1536, length 40
  21:27:38.364314 IP 211.144.27.126 > 172.16.222.146: ICMP echo reply, id 512, seq 1536, length 40
  21:27:39.274851 IP 172.16.222.146 > 211.144.27.126: ICMP echo request, id 512, seq 1792, length 40
  21:27:39.377223 IP 211.144.27.126 > 172.16.222.146: ICMP echo reply, id 512, seq 1792, length 40
  21:27:41.313174 ARP, Request who-has 172.16.222.146 tell 172.16.222.1, length 28
  21:27:41.314853 ARP, Reply 172.16.222.146 is-at 08:00:27:5b:a8:a5 (oui Unknown), length 46
  ```

è¿™é‡Œè¯´å¾—å¾ˆè½»æ¾ï¼Œå…¶å®ç»™`gateway-debian`è£…å¢å¼ºä»¶å…¶å®è´¹äº†ä¸å°‘æ—¶é—´ï¼Œä»ç³»ç»Ÿä¸è‡ªå¸¦`linux-headers-$(uname -r)`åˆ°æ²¡æœ‰è£…`build-essential`ï¼Œæ€»ä¹‹åˆ°é¡ºåˆ©å®‰è£…å¥½å¢å¼ºä»¶å¹¶æŒ‚è½½å¥½å…±äº«æ–‡ä»¶å¤¹å…¶å®åˆèµ°äº†å¾ˆå¤šæˆ‘æ„Ÿè§‰ä¸å¿…è¦çš„æµç¨‹ğŸ˜“

#### æ‰€æœ‰èŠ‚ç‚¹å‡å¯ä»¥è®¿é—®äº’è”ç½‘

å…¶å®ä¸Šä¸€æ­¥å·²ç»è¯æ˜äº†4å°é¶æœºè®¿é—®ç™¾åº¦å’Œäº¬ä¸œæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è®¿é—®äº’è”ç½‘ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æ”¾ä¸Š`attacker-kali`å’Œ`gateway-debian`çš„äº’è”ç½‘è¿é€šæ€§æµ‹è¯•æˆªå›¾å³å¯

æ‰€è°“è¿é€šæ€§æµ‹è¯•ï¼Œå½“ç„¶æ˜¯pingç™¾åº¦è¾£ğŸ˜‚

>ç™¾åº¦å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯è¢«æ‹¿æ¥pingçš„!  
>by who?

Virtual Machine|Network Connection Test Screenshot
:-:|:-:
attacker-kali|![screenShot](./img/attackerPingBaidu.png)
gateway-debian|![screenShot](./img/gatewayPingBaidu.png)

## æ€»ç»“

### ä¸€ç‚¹å¿ƒå¾—

å…¶å®å†™åˆ°è¿™é‡Œåªæƒ³è¦å¿«ç‚¹ç»“æŸäº†ï¼Œå·²ç»å†™ä¸åŠ¨äº†ï¼ŒåŸæœ¬è®¡åˆ’å„ç§åæ§½çš„å¿ƒæƒ…ç»“æœä¹Ÿåœ¨å®Œæˆè¿™æ•´ç¯‡æŠ¥å‘Šçš„è¿‡ç¨‹ä¸­è¢«å†²æ·¡äº†ğŸ˜”

ä¹‹å‰è¯¾ä¸Šè¯´çš„ï¼Œä¸ºäº†é€‚åº”å½“å‰å®¹å™¨åŒ–çš„å¼€å‘æ–¹å¼ï¼Œä»Šå¹´è¯¾ç¨‹çš„å®éªŒæœ€å¥½æ˜¯èƒ½åœ¨å®¹å™¨å†…å®Œæˆï¼Œç¬¬ä¸€æ¬¡æäº¤ä¸€åŠçš„æŠ¥å‘Šé‚£ä¼šçœŸçš„æœ‰æƒ³å»è¯•ä¸€ä¸‹å®¹å™¨ï¼Œå› ä¸ºå¾ˆå¿«å°±å®Œæˆäº†è¿™ä¸€éƒ¨åˆ†çš„å®éªŒæ“ä½œï¼Œç°åœ¨æ¥è¯´å› ä¸ºè¦å®Œæˆè¿™ç¯‡ç©¶æé•¿ç¯‡çš„æŠ¥å‘Šï¼Œç»“æœä¹Ÿå˜å¾—æ²¡é‚£ä¹ˆæœ‰åŠ¨åŠ›äº†ï¼Œæ€»ä¹‹å¦‚æœåé¢æ²¡æœ‰å®éªŒçš„è¯¾ç¨‹æœŸé—´å¦‚æœå“ªå¤©åˆæ¥äº†å…´è¶£å†å»è¯•è¯•çœ‹å§

## å‚è€ƒé“¾æ¥

- [Virtualbox å¤šé‡åŠ è½½ é«˜çº§åŠŸèƒ½ä»‹ç»](https://blog.csdn.net/Jeanphorn/article/details/45056251)

- [Chapter 5. Virtual Storage](https://www.virtualbox.org/manual/ch05.html)

- [Windows XPé…ç½®æ–¹æ³•](http://ipv6.ustb.edu.cn/config_winxp.html)

- [How to install kernel headers on Debian](https://linuxhint.com/install-kernel-headers-debian/)

- [Chapter 6. Virtual Networking](https://www.virtualbox.org/manual/ch06.html)

- [VirtualBox Network Settings: Complete Guide](https://www.nakivo.com/blog/virtualbox-network-setting-guide/)
